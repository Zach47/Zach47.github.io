AHK是一个生产力工具。为了能够更好地使用AHK提高生产效率，有必要对快捷键进行合理的规划。

## 一、增加新修饰键

快捷键一般由修饰键+其他按键组成，所以越多修饰键就可以组成越多快捷键。但是常用的修饰键（比如Ctrl、Shift、Alt、Win）一般已经绑定有特定功能，限制了自由发挥的空间。这时我们可以考虑在不影响其正常使用的情况下，将一些不常用的按键转换成“伪修饰键”，比如说重音键、大写键，空格键。代码如下。

```autohotkey
;将以下按键转换成「伪修饰键」的同时保证其正常使用。

`::`                    ;保证[重音键]的正常使用。
Space::Space            ;保证[Space]的正常使用。

CapsLock::              ;保证[CapsLock]的正常使用。
SetCapsLockState % GetKeyState("CapsLock", "T") ? "AlwaysOff" : "AlwaysOn"
return
```

有了新的修饰键后，我们就可以利用新的修饰键加上其他按键构建出一个平行的按键层（key layer），在这个按键层中自由地定义我们想要的功能。建议优先定义以下功能：

```autohotkey
` & r::Reload		;重载脚本。
` & l::ListVars		;显示所有脚本变量。
` & k::KeyHistory	;显示按键历史。
```

## 二、全局热键和局部热键

默认情况下，热键是全局有效的。但是控制热键的作用范围是很有必要的，这样可以减少热键对不同窗口的影响，也便于我们针对特定窗口编写热键。控制作用范围的语法是：`#If WinActive()`

所以，我们可以将所有热键分为全局热键和局部热键。

| 类型     | 注释                                                         |
| -------- | ------------------------------------------------------------ |
| 全局热键 | 全局热键要避免和系统或常用软件的默认热键冲突。在上文中提到的新修饰键很适合用来创建全局热键。因为和默认热键相比，使用了不同修饰键，一般不会产生冲突。 |
| 局部热键 | 局部热键的作用域控制在指定的窗口内。在不影响该窗口的默认热键的情况下，可以使用Ctrl、Shift、Alt、Win作为修饰键。因为这几个修饰键在键盘的设计中更为顺手。 |

## 三、脚本结构

综上所述，我们的AHK脚本结构可以是这样：

* 一个主脚本，比如：`main.ahk` 。里面定义好新建的修饰键。
* 一个文件夹，存放全局热键，比如：`./global/`
* 一个文件夹，存放局部热键，比如：`./local/`

